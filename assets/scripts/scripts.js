"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function onYouTubeIframeAPIReady(){player=new YT.Player("player",{videoId:"M7lc1UVf-VE"})}var element=document.querySelectorAll(".lazy"),lazyLoad=function(target){for(var src,windowPosition_top=window.pageYOffset,windowPosition_bottom=(window.pageXOffset,window.pageXOffset,document.documentElement.clientWidth,window.pageYOffset+document.documentElement.clientHeight),i=0;i<target.length;i++)window.pageYOffset+target[i].getBoundingClientRect().top>=windowPosition_top&&window.pageYOffset+target[i].getBoundingClientRect().top<windowPosition_bottom&&(src=target[i].getAttribute("data-background-image"),target[i].style.backgroundImage="url(".concat(src,")"))};lazyLoad(element),window.addEventListener("scroll",function(){lazyLoad(element)});var player,CustomPoupap=function(){function CustomPoupap(onHideCallBack){var node=onHideCallBack.node,eventSelector=onHideCallBack.eventSelector,siteWrap=onHideCallBack.siteWrap,onShowCallBack=onHideCallBack.onShowCallBack,onHideCallBack=onHideCallBack.onHideCallBack;_classCallCheck(this,CustomPoupap),this.node=node,this.eventSelector=eventSelector,this.siteWrap=siteWrap,this.onShowCallBack=onShowCallBack,this.onHideCallBack=onHideCallBack,this.rId=Math.random().toString(36).substring(7),this.__onShow=this.__onShow.bind(this),this.__onHide=this.__onHide.bind(this),this.__onHandlerHide=this.__onHandlerHide.bind(this),this.__redirectingToFirst=this.__redirectingToFirst.bind(this),this.__redirectingToLast=this.__redirectingToLast.bind(this)}return _createClass(CustomPoupap,[{key:"__onShow",value:function(){var elem=document.getElementById(this.rId);elem.classList.add("active"),elem.focus(),elem.setAttribute("aria-hidden",!1),document.querySelector(this.siteWrap).setAttribute("aria-hidden",!0),this.onShowCallBack&&this.onShowCallBack()}},{key:"__onHide",value:function(){var elem=document.getElementById(this.rId);elem.classList.remove("active"),elem.setAttribute("aria-hidden",!0),document.querySelector(this.siteWrap).setAttribute("aria-hidden",!1),this.onHideCallBack&&this.onHideCallBack()}},{key:"__onHandlerHide",value:function(e){27===e.keyCode&&this.__onHide()}},{key:"__redirectingToFirst",value:function(e){e.shiftKey||9!==e.which||(e.preventDefault(),document.getElementById(this.rId).focus())}},{key:"__redirectingToLast",value:function(e){e.shiftKey&&9===e.keyCode&&(e.preventDefault(),document.querySelector(".close").focus())}},{key:"init",value:function(){var html=document.querySelector(this.node).cloneNode(!0);document.querySelector(this.node).remove();html='<div id="'.concat(this.rId,'" class="poupap" aria-hidden="true" tabindex="1">\n\t\t\t<div class="poupap__content" tanindex="2">\n\t\t\t\t').concat(html.outerHTML,'\n\t\t\t\t<button class="close" tanindex="3"></button>\t\n\t\t\t</div>\n\t\t</div>');document.querySelector("body").insertAdjacentHTML("beforeEnd",html),document.querySelector(this.eventSelector).addEventListener("click",this.__onShow),document.querySelector(".close").addEventListener("click",this.__onHide),document.addEventListener("keydown",this.__onHandlerHide),document.querySelector(".close").addEventListener("keydown",this.__redirectingToFirst),document.getElementById(this.rId).addEventListener("keydown",this.__redirectingToLast)}},{key:"destroy",value:function(){document.querySelector(this.eventSelector).removeEventListener("click",this.__onShow),document.querySelector(".close").removeEventListener("click",this.__onHide),document.removeEventListener("keydown",this.__onHandlerHide),document.querySelector(".close").removeEventListener("click",this.__redirectingToFirst),document.getElementById(this.rId).removeEventListener("keydown",this.__redirectingToLast),document.querySelector(this.html).remove()}}]),CustomPoupap}();window.addEventListener("load",function(){var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);new CustomPoupap({node:"#player",eventSelector:".main-block__video-play",siteWrap:".main-block",onHideCallBack:function(){player.stopVideo()}}).init()});